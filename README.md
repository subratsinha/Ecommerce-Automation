# Ecommerce Automation

End-to-end Selenium automation project for the nopCommerce demo admin site. This README documents how to set up the development environment, run tests, generate reports, and troubleshoot common issues.

## Table of Contents
- **Project Overview**
- **Repository Structure**
- **Prerequisites**
- **Setup (Windows)**
- **Installing Python dependencies**
- **Running Tests**
- **Configuration**
- **Logging & Reports**
- **Troubleshooting**
- **CI / GitHub**
- **Contributing**

## Project Overview
This project uses Selenium WebDriver with the Page Object pattern and PyTest for test orchestration. Tests exercise the nopCommerce admin demo at `https://admin-demo.nopcommerce.com/`.

## Repository Structure
Top-level layout (important folders/files):

- `pageObjects/` - Page object classes (wrap UI interactions).
- `testCases/` - PyTest testcases and `conftest.py` (fixtures).
- `utilities/` - Helpers such as `customLogger.py` and `readProperties.py`.
- `Configurations/` - `config.ini` to store environment-specific values.
- `Reports/` - HTML reports generated by `pytest-html`.
- `Logs/` - `automation.log` created by the logger at runtime.
- `Screenshots/` - Screenshots captured on test failures.
- `README.md` - This file.

Example tree (approx):

```
Ecommerce/
├─ Configurations/
│  └─ config.ini
├─ Logs/
│  └─ automation.log
├─ Reports/
│  └─ report.html
├─ Screenshots/
├─ pageObjects/
│  └─ LoginPage.py
├─ testCases/
│  ├─ conftest.py
│  └─ test_login.py
├─ utilities/
│  ├─ customLogger.py
│  └─ readProperties.py
└─ README.md
```

## Prerequisites
- Windows / macOS / Linux
- Python 3.8+ (project uses 3.13 in development environment)
- Git (to clone/push repository)
- Google Chrome (or Firefox) installed for running browser tests

Recommended Python packages used in this project:
- `selenium`
- `webdriver-manager`
- `pytest`
- `pytest-html`
- `pytest-metadata`
- `pytest-xdist` (optional, for parallel runs)

## Setup (Windows)
1. Open PowerShell in the repository root.
2. Create and activate a virtual environment (recommended):

```powershell
python -m venv venv
venv\Scripts\Activate.ps1   # PowerShell
# or use: venv\Scripts\activate.bat for cmd.exe
```

3. Upgrade pip and install dependencies:

```powershell
python -m pip install --upgrade pip
pip install -r requirements.txt  # if you have a requirements file
# or install common deps manually:
pip install selenium webdriver-manager pytest pytest-html pytest-metadata pytest-xdist
```

Note: If you don't have a `requirements.txt`, you can generate one from your venv with `pip freeze > requirements.txt`.

## Installing Python dependencies (one-liner)

```powershell
venv\Scripts\Activate.ps1
pip install selenium webdriver-manager pytest pytest-html pytest-metadata pytest-xdist
```

## Running Tests

Run the entire test suite:

```powershell
venv\Scripts\Activate.ps1
python -m pytest -v -s
```

Run a single test file:

```powershell
python -m pytest -v -s testCases/test_login.py --browser=chrome
```

Generate an HTML report (pytest-html):

```powershell
python -m pytest -v -s --html=Reports/report.html --self-contained-html
```

Run tests in parallel (xdist):

```powershell
python -m pytest -v -s -n 2 --html=Reports/report.html
```

Notes on `--browser`:
- The fixture in `testCases/conftest.py` accepts `--browser` with `chrome` (default) and `firefox` supported.

## Configuration
- Edit `Configurations/config.ini` to update `baseURL`, `useremail`, and `password` used by tests.
- `utilities/readProperties.py` reads this file.

## Logging & Reports
- `utilities/customLogger.py` creates `Logs/automation.log` and writes test logs.
- HTML reports are saved under `Reports/` when using `--html`.
- Screenshots on failures are stored in `Screenshots/`.

If `Logs/automation.log` is not created:
1. Ensure tests import and call the logger (e.g., `logger = LogGen.loggen()`).
2. The logger implementation will create the `Logs/` directory automatically; ensure the process has write permissions.

## Troubleshooting (common issues)

- ReadTimeoutError when calling `driver.get(...)` or during WebDriver commands:
	- Ensure the correct Chrome/Firefox binary is installed and up-to-date.
	- Use `webdriver-manager` (already used in `conftest.py`) which downloads a matching driver.
	- Try increasing timeouts in `conftest.py` (`implicitly_wait`, `set_page_load_timeout`).
	- On Windows, headless mode can behave differently—try running without headless if tests hang.

- `pytest_html` / metadata errors (e.g., `config._metadata` attribute):
	- Ensure `pytest-html` and `pytest-metadata` are installed. The project uses code in `conftest.py` that guards `_metadata` usage.

## GitHub / CI

To push this project to a new GitHub repository named `Ecommerce Automation` (example):

```powershell
# create a commit
git add .
git commit -m "First commit"

# add remote and push (replace <REMOTE_URL> with your repo URL)
git remote add origin <REMOTE_URL>
git branch -M main
git push -u origin main
```

Alternative: If you have the GitHub CLI (`gh`) installed and authenticated:

```powershell
gh repo create "Ecommerce Automation" --public --source=. --remote=origin --push
```

If you prefer automated creation via API, provide a GitHub Personal Access Token (PAT) with `repo` scope and I can create and push the repo for you (you should revoke the token afterwards).

## Contribution
- Keep tests isolated and idempotent when possible.
- Use page object classes in `pageObjects/` for UI interactions.

## Useful Commands Summary

- Activate venv:
```powershell
venv\Scripts\Activate.ps1
```

- Install dependencies:
```powershell
pip install -r requirements.txt
```

- Run tests with HTML report:
```powershell
python -m pytest -v -s --html=Reports/report.html --self-contained-html
```

